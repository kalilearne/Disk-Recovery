# 磁盘恢复工具 (Disk Recovery Tool)

一个功能强大的磁盘数据恢复和管理工具，支持多种文件系统的数据恢复、磁盘分析和数据擦除功能。

## 功能特性

### 🔍 数据恢复
- **文件签名恢复**: 基于文件头和尾部特征恢复已删除文件
  - 支持 JPG、PNG、PDF、ZIP、RAR、DOC、DOCX 等常见格式
  - 智能文件完整性检测
  - **磁盘镜像快照**: 创建磁盘的逐比特镜像副本进行安全恢复
- **FAT32 文件系统恢复**: 深度扫描 FAT32 分区恢复文件
- **NTFS 文件系统恢复**: 分析 NTFS 文件系统结构恢复数据

### 💾 磁盘管理
- **物理磁盘浏览**: 查看系统中所有物理磁盘和分区
- **分区分析**: 详细显示分区信息、文件系统类型和大小
- **十六进制查看器**: 直接查看磁盘扇区的原始数据
- **虚拟磁盘支持**: 加载和分析虚拟磁盘镜像文件

### 🗑️ 数据擦除
- **安全数据擦除**: 多种擦除算法确保数据无法恢复
  - 零填充擦除
  - 随机数据擦除
  - 多遍擦除支持
- **分区擦除**: 针对特定分区进行安全擦除
- **文件擦除**: 安全删除敏感文件

### 🖥️ 用户界面
- **直观的图形界面**: 基于 PyQt5 的现代化界面设计
- **实时进度显示**: 所有操作都有详细的进度和状态反馈
- **多线程处理**: 后台处理避免界面卡顿
- **管理员权限检测**: 自动请求必要的系统权限

## 系统要求

- **操作系统**: Windows 7/8/10/11
- **Python**: 3.6 或更高版本
- **权限**: 需要管理员权限进行磁盘操作

## 依赖库

```
PyQt5>=5.15.0
psutil>=5.8.0
pywin32>=227
```

## 安装和运行

### 方式一：直接运行可执行文件
1. 下载 `dist/DISK-recv.exe`
2. 右键选择"以管理员身份运行"

### 方式二：从源码运行
1. 克隆或下载项目源码
2. 安装依赖库：
   ```bash
   pip install PyQt5 psutil pywin32
   ```
3. 以管理员身份运行：
   ```bash
   python main.py
   ```

### 方式三：使用批处理文件
1. 双击 `start.bat` 文件
2. 系统会自动请求管理员权限

## 使用说明

### 基本操作流程

1. **启动程序**: 确保以管理员权限运行
2. **选择磁盘**: 在左上角下拉菜单中选择要操作的磁盘
3. **查看分区**: 中间区域显示磁盘的分区信息
4. **选择功能**: 使用工具栏按钮选择相应功能

### 功能详解

#### 📁 物理磁盘浏览
- 点击"物理磁盘浏览"按钮
- 查看磁盘的详细信息和分区表
- 支持 MBR 和 GPT 分区表格式

#### 🔍 分区浏览
- 点击"分区浏览"按钮
- 在分区列表中点击特定分区
- 左下角会显示该分区的文件树结构

#### 💿 虚拟磁盘
- 点击"虚拟磁盘"按钮
- 选择虚拟磁盘文件（.vhd、.vmdk、.img 等）
- 像操作物理磁盘一样分析虚拟磁盘

#### 🔧 文件恢复
1. **文件签名恢复**:
   - 点击"文件签名恢复"按钮
   - 选择恢复模式：
     - **磁盘镜像快照恢复（推荐）**: 创建磁盘镜像副本进行安全恢复
     - **传统直接恢复**: 直接访问磁盘设备进行扫描
   - 选择要扫描的磁盘或分区
   - 选择输出目录
   - 选择要恢复的文件类型
   - 开始扫描和恢复

2. **FAT32 恢复**:
   - 点击"FAT32恢复"按钮
   - 选择 FAT32 分区
   - 选择输出目录
   - 开始恢复过程

3. **NTFS 恢复**:
   - 点击"NTFS恢复"按钮
   - 选择 NTFS 分区
   - 选择输出目录
   - 开始恢复过程

#### 🗑️ 数据擦除
- 点击"数据擦除"按钮
- 选择要擦除的分区或磁盘
- 选择擦除方法和遍数
- 确认后开始擦除（**不可逆操作，请谨慎使用**）

## 项目结构

```
├── main.py                    # 程序入口，处理管理员权限
├── disk_recovery_tool.py      # 主界面和核心逻辑
├── ui_components.py           # UI组件定义
├── disk_utils.py              # 磁盘管理工具
├── file_recovery.py           # 文件签名恢复
├── fat32_recovery.py          # FAT32文件系统恢复
├── ntfs_recovery.py           # NTFS文件系统恢复
├── data_wipe.py               # 数据擦除功能
├── virtual_disk.py            # 虚拟磁盘处理
├── disk_reader.py             # 磁盘读取工具
├── file_system_reader.py      # 文件系统读取器
├── disk_image_snapshot.py     # 磁盘镜像快照功能
├── start.bat                  # Windows启动脚本
├── main.spec                  # PyInstaller打包配置
└── dist/                      # 编译后的可执行文件
    └── DISK-recv.exe
```

## 技术特点

### 🔧 核心技术
- **低级磁盘访问**: 直接读取磁盘扇区，绕过文件系统限制
- **磁盘镜像技术**: 逐比特复制磁盘数据，创建完整的磁盘镜像
- **多线程架构**: 使用 QThread 实现后台处理，保持界面响应
- **文件系统解析**: 深度理解 FAT32 和 NTFS 文件系统结构
- **文件签名识别**: 基于文件头尾特征的智能文件识别

### 🛡️ 安全特性
- **权限管理**: 自动检测和请求管理员权限
- **错误处理**: 完善的异常处理机制
- **数据保护**: 擦除操作前的多重确认
- **进度监控**: 实时显示操作进度和状态

## 注意事项

⚠️ **重要提醒**:

1. **管理员权限**: 本工具需要管理员权限才能正常工作
2. **数据安全**: 数据擦除操作不可逆，请务必确认后再执行
3. **备份重要数据**: 在进行任何磁盘操作前，请备份重要数据
4. **兼容性**: 主要针对 Windows 系统设计和测试
5. **虚拟磁盘权限**: 操作虚拟磁盘文件时，确保文件没有被其他程序占用

## 故障排除

### 常见问题

**Q: 程序启动时提示权限不足**
A: 请右键点击程序，选择"以管理员身份运行"

**Q: 无法访问某些磁盘或分区**
A: 检查磁盘是否正常连接，或者磁盘是否有硬件故障

**Q: 恢复的文件无法打开**
A: 文件可能已经损坏，或者恢复过程中出现错误。尝试使用不同的恢复方法

**Q: 虚拟磁盘加载失败**
A: 确保虚拟磁盘文件没有被其他程序占用，并且文件格式受支持

**Q: 数据擦除操作失败**
A: 检查目标磁盘是否被其他程序占用，或者磁盘是否有写保护

## 开发信息

- **开发语言**: Python 3.x
- **GUI框架**: PyQt5
- **打包工具**: PyInstaller
- **支持平台**: Windows

## 许可证

本项目仅供学习和研究使用。使用本工具进行数据恢复或擦除操作时，请遵守相关法律法规。

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的磁盘浏览和分区分析
- 实现文件签名恢复功能
- 添加 FAT32 和 NTFS 恢复支持
- 集成数据擦除功能
- 支持虚拟磁盘加载

---

**免责声明**: 本工具仅供教育和研究目的使用。使用者应当遵守当地法律法规，对使用本工具造成的任何后果承担全部责任。开发者不对数据丢失或其他损失承担任何责任。